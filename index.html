<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Random Number Generator</title>
<style>
  body {
    font-family: monospace;
    background: #111;
    color: #0f0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    overflow: hidden;
  }
  .container {
    background: #000;
    padding: 30px;
    border-radius: 10px;
    text-align: center;
    width: 350px;
    max-height: 90vh;
    overflow: hidden;
    box-shadow: 0 0 20px #0f0;
  }
  input, button {
    font-family: monospace;
    margin-bottom: 10px;
    padding: 8px;
    width: 100%;
    border-radius: 5px;
    border: 1px solid #0f0;
    background: #111;
    color: #0f0;
  }
  button {
    cursor: pointer;
    background: #e63946;
    color: white;
    border: none;
  }
  .progress-bar {
    margin-top: 15px;
    width: 100%;
    height: 10px;
    background: #222;
    border-radius: 5px;
    overflow: hidden;
    display: none;
  }
  .progress {
    height: 100%;
    width: 0%;
    background: #e63946;
    transition: width 0.1s linear;
  }
  .result {
    margin-top: 20px;
    text-align: left;
    font-size: 14px;
    max-height: 400px;
    overflow-y: auto;
  }
  .popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #e63946;
    color: #fff;
    padding: 30px 60px;
    font-size: 28px;
    font-weight: bold;
    border-radius: 10px;
    display: none;
    z-index: 999;
    box-shadow: 0 0 30px #fff;
    text-align: center;
  }
  #audio-toggle {
    position: fixed;
    top: 10px;
    left: 10px;
    font-size: 24px;
    color: #0f0;
    cursor: pointer;
    user-select: none;
    z-index: 1000;
  }
</style>
</head>
<body>
<audio id="bg-music" src="let_him_cook.m4a" loop></audio>
<div id="audio-toggle">üîä</div>

<div class="container" id="container">
  <h1>Generate Random Numbers</h1>
  <input type="number" id="from" placeholder="From">
  <input type="number" id="to" placeholder="To">
  <button onclick="fakeGenerate()">Generate</button>
  <div class="progress-bar">
    <div class="progress" id="progress"></div>
  </div>
  <div class="result" id="result"></div>
</div>

<div class="popup" id="popup">‚ö†Ô∏è WARNING 451 Critical errors detected !</div>

<script>
const bgMusic = document.getElementById("bg-music");
const audioToggle = document.getElementById("audio-toggle");
let finalNumber = null; // stocke le r√©sultat final

function startMusic() {
  if (bgMusic.paused) {
    bgMusic.play().catch(err => console.log("Autoplay bloqu√©:", err));
  }
}

audioToggle.addEventListener("click", () => {
  bgMusic.muted = !bgMusic.muted;
  audioToggle.textContent = bgMusic.muted ? "üîá" : "üîä";
});

function fakeGenerate() {
  startMusic();

  const container = document.getElementById("container");
  const resultElement = document.getElementById("result");
  const progressBar = document.querySelector(".progress-bar");
  const progress = document.getElementById("progress");

  // R√©cup√®re les bornes pour g√©n√©rer un nombre
  const fromVal = parseInt(document.getElementById("from").value);
  const toVal = parseInt(document.getElementById("to").value);

  // V√©rifie si bornes valides
  if(!isNaN(fromVal) && !isNaN(toVal) && fromVal < toVal){
    finalNumber = Math.floor(Math.random() * (toVal - fromVal + 1)) + fromVal;
  } else {
    finalNumber = null; // cas invalide
  }

  resultElement.innerHTML = "";
  progressBar.style.display = "block";
  progress.style.width = "0%";

  let dots = "";
  let dotInterval = setInterval(() => {
    dots = dots.length < 3 ? dots + "." : "";
    let cpuUsage = Math.floor(Math.random() * (85 - 79 + 1)) + 79;
    resultElement.innerHTML = `Processing${dots} (using ${cpuUsage}% of CPU)`;
  }, 500);

  let width = 0;
  const totalTicks = 40;
  const increment = 100 / totalTicks;
  let tick = 0;
  let interval = setInterval(() => {
    if(tick >= totalTicks){
      clearInterval(interval);
      clearInterval(dotInterval);
      startErrorScroll();
    } else {
      width += increment;
      progress.style.width = width + "%";
      tick++;
    }
  }, 100);
}

function startErrorScroll() {
  const container = document.getElementById("container");
  const resultElement = document.getElementById("result");

  container.querySelectorAll('input, button, h1').forEach(el => el.style.display = 'none');

  const errorTemplates = [
    "Error: Failed to allocate memory at 0x0042FFAA",
    "Warning: Unknown HTML tag detected",
    "Fatal: Stack overflow in process #22",
    "Error: Cannot read property 'undefined' of null",
    "Warning: CPU temperature exceeded safe limit",
    "Error: Disk read failure",
    "Warning: Deprecated API call detected",
    "Error: Unexpected token '<' in JSON",
    "Error: Out of memory",
    "Warning: High CPU usage detected",
    "Error: Network timeout while connecting to 127.0.0.1",
    "Error: Critical system file missing",
    "Warning: Invalid pointer reference",
    "Error: SyntaxError in line 42"
  ];

  const errors = [];
  for(let i=0; i<200; i++){
    const msg = errorTemplates[Math.floor(Math.random()*errorTemplates.length)];
    errors.push(msg);
  }

  let index = 0;
  const intervalTime = 4000 / errors.length;
  const interval = setInterval(() => {
    if(index < errors.length){
      resultElement.innerHTML += errors[index] + "<br>";
      resultElement.scrollTop = resultElement.scrollHeight;
      index++;
    } else {
      clearInterval(interval);
      showPopup();
    }
  }, intervalTime);
}

function showPopup(){
  const popup = document.getElementById("popup");
  popup.style.display = "block";

  setTimeout(()=>{
    document.body.innerHTML = `
      <div id="error-screen" style="color:#f00; text-align:center; font-family:monospace; cursor:pointer;">
        <h1 id="error-text">404 Not Found</h1>
        <p>The page you are looking for does not exist.</p>
      </div>`;
    document.body.style.background = "#000";

    // Quand on clique sur le texte, on remplace par le r√©sultat
    document.getElementById("error-screen").addEventListener("click", ()=>{
      const text = document.getElementById("error-text");
      if(finalNumber !== null){
        text.textContent = finalNumber;
      } else {
        text.textContent = "ERROR";
      }
    });
  }, 4000);
}
</script>
</body>
</html>
